<!-- index.html -->

{% extends 'base.html' %}

{% block content %}
<script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

<script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@v0.149.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@v0.149.0/examples/jsm/"
            }
    }
</script> 

<div class = "flex-container">
    <!-- Left side content (original content) -->
    <div class = "flex-child">
        <h1> Teach robot to move </h1>
        <br>
        <h6>  Choose the STT model</h6>
        <select class="form-select" id="modelSelect">
            <option value="nativejs"> Native JS </option>
            <option value="whisper"> Whisper </option>
        </select>
        <br></br>
        <h5> ðŸ‘‡ Click here and start speaking </h5>
        <div class="speech-container">
            <button id="start-recording" type="button" >ðŸ’¬ Start listening</button>
            <button id="stop" type="button" style="display:none;">ðŸ›‘ Stop listening</button>
            <p id="record-notice" style="visibility:hidden;" > Your voice is now being recorded... <br> Click the "Stop" button to stop </p>
        </div>

        <p id="status"></p>
        <!--<a id="downloadLink" style="display: none;" download>downloadAudio</a>-->

        <form id="user-form">
            <br>
            <textarea id="draft" type="text" class="output"></textarea>
            <br>
            <button type="submit">Generate</button>
        </form>
    
            <div id="text-output">
            <!-- The generated output will be displayed here -->
        </div>
        <br>
        <div id="output-loading" class="spinner-border" role="status" style="display:none;">
            <span class="visually-hidden">Loading...</span>
        </div>
        <div id="output-block" style="display:none;">
            <h6> You might want to make the robot </h6>
            <h5 id="output-command"> </h5>
            <button class="retryBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                </svg>
            </button> 
            <button id="btn-perform-action"> GO! </button>
        </div>
    </div>         

    <!--
    <div class = "flex-child">
        <h1> Robot </h1>
        <img src="{{ url_for('static', filename='images/robot.png') }}" alt="robot" width="300" height="300">
    </div>
    -->

</div>

<!--<script src="{{ url_for('static', filename='scripts/selectModel.js')}}"></script>-->
<script type="module" src="{{ url_for('static', filename='scripts/selectModel.js')}}"></script>
<script type="module" src="{{ url_for('static', filename='scripts/main.js')}}"></script>
<script type="module" src="{{ url_for('static', filename='scripts/robot.js') }}"></script>
<!--<script src="{{ url_for('static', filename='scripts/speechRecognition.js')}}"></script>-->
<!--<script src="{{ url_for('static', filename='scripts/mediaRecorder.js')}}"></script>-->
{% endblock %}